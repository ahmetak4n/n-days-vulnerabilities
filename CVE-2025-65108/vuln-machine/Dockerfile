FROM ghcr.io/puppeteer/puppeteer:latest 

USER pptruser

WORKDIR /home/pptruser

COPY --chown=pptruser:pptruser . .

RUN npm install && npm run build

EXPOSE 3000

ENV XDG_CONFIG_HOME=/tmp/.chromium
ENV XDG_CACHE_HOME=/tmp/.chromium

CMD ["node", "/home/pptruser/dist/index.js"]
